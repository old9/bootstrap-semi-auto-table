+function(a){"use strict";function b(b){var c,e=arguments;return this.each(function(){var f=a(this),g=f.data("semiAutoTable");if(!g){var h=a.extend(!0,{},a.fn.semiAutoTable.defaults,"object"==typeof b&&b);f.data("semiAutoTable",g=new d(this,h))}if("string"==typeof b)if(1==e.length){var i=g[b].call(g);"undefined"!=typeof i&&(c=i)}else{var i=g[b].apply(g,Array.prototype.slice.call(e,1));"undefined"!=typeof i&&(c=i)}}),"undefined"!=typeof c?c:this}var c=function(b,c){return 1===arguments.length?b:(arguments.length>2&&c.constructor!==Array&&(c=a.makeArray(arguments).slice(1)),c.constructor!==Array&&(c=[c]),a.each(c,function(a,c){b=b.replace(new RegExp("\\{"+a+"\\}","g"),function(){return c})}),b)},d=function(b,c){this.options=c,this.$table=a(b),this.initLayout(),this.initRowButton(),this.initMenuItems(),this.initColumnSelect(),this.initPaginator(),this.initSortBy()};d.VERSION="0.0.1",d.prototype.initLayout=function(){var b=a("<div></div>");b.addClass(this.options.containerClass),this.$container=b,this.$table.after(b),this.$table.appendTo(b);var c=a('<div class="'+this.options.toolbarClass+'"></div>');c.appendTo(b);var d=a('<div class="'+this.options.menuBarWrapperClass+'"></div>');d.appendTo(c);var e=a('<div class="'+this.options.menuBarClass+'" role="toolbar"></div>');e.appendTo(d),this.$menuBar=e;var f=a('<div class="'+this.options.paginatorWrapperClass+'"></div>');f.appendTo(c);var g=a('<div class="'+this.options.paginatorClass+'" role="toolbar"></div>');g.appendTo(f),this.$paginator=g;var h=a('<div class="'+this.options.tableWrapperClass+'" >');h.appendTo(b),this.$table.appendTo(h),this.$table.addClass(this.options.tableClass)},d.prototype.initRowButton=function(){this.updateRowButton(this.options.rowOption)},d.prototype.updateRowButton=function(b){if(this.$rowIdInputList&&(this.$rowIdInputList.off("click"),delete this.$rowIdInputList),this.$selectAll&&(this.$selectAll.remove(),delete this.$selectAll),this.$rows&&this.$rows.off("click"),b){this.options.rowOption=a.extend({},this.options.rowOption,b);var c=this,d=this.options.rowOption,e=d.type,f=d.showSelectAll,g=d.inputName,h=d.rowSelector;if("checkbox"==e){if(this.$rowIdInputList=this.$table.find(':checkbox[name="'+g+'"]'),f){var i=!1;this.$selectAll=this.addMenuItem({title:a.fn.semiAutoTable.locales[this.options.locale].select_all,callback:function(){c.$rowIdInputList.prop("checked",!i),i=!i},dropdowns:[{title:a.fn.semiAutoTable.locales[this.options.locale].select_inverse,callback:function(){a.each(c.$rowIdInputList,function(b,c){var d=a(c);d.prop("checked",!d.prop("checked"))}),i=!1}}]}),this.$selectAll.addClass(".select-all-btn"),this.$selectAll.prependTo(this.$menuBar)}this.$rows=this.$table.find(h),this.$rows.on("click",function(b){if(!a(b.target).is(":checkbox")){var c=a(b.currentTarget),d=c.find(':checkbox[name="'+g+'"]');a(b.target).is("label")&&a(b.target).attr("for")==d.attr("id")||d.prop("checked",!d.prop("checked"))}})}else{if("radio"!=e)throw"Unrecgonized rowOption.type";this.$rowIdInputList=this.$table.find(':radio[name="'+g+'"]'),this.$rows=this.$table.find(h),this.$rows.on("click",function(b){if(!a(b.target).is(":radio")){var d=a(b.currentTarget),e=d.find(':radio[name="'+g+'"]');if(a(b.target).is("label")&&a(b.target).attr("for")==e.attr("id"))return void a.each(c.$rowIdInputList,function(b,c){var d=a(c);d.prop("checked",!1)});var f=!e.prop("checked");a.each(c.$rowIdInputList,function(b,c){var d=a(c);d.prop("checked",!1)}),e.prop("checked",f)}})}}},d.prototype.initColumnSelect=function(){this.updateColumnSelect(this.options.columnOption)},d.prototype.updateColumnSelect=function(b){this.$selectColumn&&(this.$selectColumn.remove(),delete this.$selectColumn),this.options.columnOption=a.extend({},this.options.columnOption,b);var c=this.options.columnOption,d=c.showColumnSelect,e=c.stickyColumns,f=c.hideColumns,g=[],h=this.$table.find("thead>tr>th"),i=this.$table.find("tr");d&&(h.each(function(b,c){var d=i.find("th:eq("+b+")"),h=i.find("td:eq("+b+")"),j=!0,k=!1;if(-1!=f.indexOf(b)&&(j=!1,d.hide(),h.hide()),-1!=e.indexOf(b)&&(k=!0),a(c).text()&&0!=a(c).text().length){var l='<label class="checkbox-inline"><input type="checkbox" value="'+b;j&&(l+='" checked="'+j),k&&(l+='" disabled="'+k),l+='"/>'+a(c).text()+"</label>",g.push({title:l,callback:function(b){var c=a(b.target);if(!k){var e=a(b.currentTarget).find(":checkbox").prop("checked");c.is(":checkbox")||(e=!e,a(b.currentTarget).find(":checkbox").prop("checked",e)),e?(d.show(),h.show()):(d.hide(),h.hide())}}})}}),this.$selectColumn=this.addMenuItem({icon:"fa fa-th",dropdowns:g,keepOpen:!0}),this.$selectColumn.prependTo(this.$menuBar))},d.prototype.initMenuItems=function(){this.updateMenuItems(this.options.menus)},d.prototype.updateMenuItems=function(b){this.$selectAll?(this.$menuBar.children().not(this.$selectAll).find('[data-toggle="dropdown"]').tooltip("destroy"),this.$menuBar.children().not(this.$selectAll).find('[data-toggle="tooltip"]').tooltip("destroy"),this.$menuBar.children().not(this.$selectAll).remove()):(this.$menuBar.find('[data-toggle="dropdown"]').tooltip("destroy"),this.$menuBar.find('[data-toggle="tooltip"]').tooltip("destroy"),this.$menuBar.children().remove()),this.options.menus=b;var c=this.options.menus,d=this;a.each(c,function(a,b){d.addMenuItem(b)}),this.$menuBar.find('[data-toggle="tooltip"]').tooltip({container:"body"})},d.prototype.addMenuItem=function(a){return this._addMenuItem(this.$menuBar,a)},d.prototype._addMenuItem=function(b,c){var d=this,e=this.appendButtonGroup(b);return a.isArray(c)?a.each(c,function(a,b){d.appendButtonItem(e,b)}):this.appendButtonItem(e,c),e},d.prototype.appendButtonGroup=function(b){var c=a('<div class="btn-group" role="group"></div>');return c.addClass(this.options.btnGroupSize),c.appendTo(b),c},d.prototype.appendButtonItem=function(b,c){var d=this,e=c.title,f=c.btnClass,g=c.callback,h=c.icon,i=c.dropdowns,j=c.tooltip,k=c.keepOpen,l={title:e,icon:h,callback:g,btnClass:f,tooltip:j};if(i&&0!=i.length){b=this.appendButtonGroup(b);var m;g?(this.appendButton(b,l),m=this.appendDropdown(b,{btnClass:f,keepOpen:k})):(l=a.extend({},l,{keepOpen:k}),m=this.appendDropdown(b,l)),a.each(i,function(a,b){if("string"==typeof b){if("divider"!=b)throw"Unrecgonized menu item: "+b;d.appendDropdownDivider(m)}else d.appendDropdownItem(m,{title:b.title,callback:b.callback,icon:b.icon})})}else this.appendButton(b,l)},d.prototype.appendButton=function(b,c){var d=c.title,e=c.callback,f=c.icon,g=c.btnClass||this.options.btnClass,h=c.tooltip,i=a('<button type="button"></button>');return i.addClass("btn"),i.addClass(g),h&&0!=h.length&&(i.attr("data-toggle","tooltip"),i.attr("title",h)),d&&0!=d.length&&i.text(d),f&&0!=f.length&&i.prepend('<i class="'+f+' title-icon"></i>'),i.appendTo(b),e?i.on("click",function(b){a(b.target).is(":checkbox")||a(b.target).is(":radio")||b.preventDefault(),e(b)}):i.on("click",function(b){a(b.target).is(":checkbox")||a(b.target).is(":radio")||b.preventDefault()}),i},d.prototype.appendDropdown=function(b,c){var d=c.title,e=c.btnClass||this.options.btnClass,f=c.icon,g=c.tooltip,h=c.keepOpen||!1,i=a('<button type="button" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false"></button>');i.addClass("btn"),i.addClass(e),g&&0!=g.length&&(i.attr("title",g),i.tooltip({container:"body"})),d&&0!=d.length&&i.text(d),f&&0!=f.length&&i.prepend('<i class="'+f+' title-icon"></i>'),i.appendTo(b);var j=a('<i class="fa fa-caret-down"></i>');j.appendTo(i);var k=a('<ul class="dropdown-menu" role="menu"></ul>');return k.appendTo(b),h&&k.on("click",function(a){a.stopPropagation()}),k},d.prototype.appendDropdownItem=function(b,c){var d=c.title,e=c.callback,f=c.icon,g=a("<li></li>");g.appendTo(b);var h=a('<a href="#"></a>');d&&0!=d.length&&h.html(d),f&&0!=f.length&&h.prepend('<i class="'+f+' title-icon"></i>'),e?h.on("click",function(b){a(b.target).is(":checkbox")||a(b.target).is(":radio")||b.preventDefault(),e(b)}):h.on("click",function(b){a(b.target).is(":checkbox")||a(b.target).is(":radio")||b.preventDefault()}),h.appendTo(g)},d.prototype.appendDropdownDivider=function(b){var c=a('<li class="divider"></li>');c.appendTo(b)},d.prototype.initSortBy=function(){this.updateSortBy(this.options.sortOption)},d.prototype.updateSortBy=function(b){this.sortObject&&delete this.sortObject,this.$sortItems&&(this.$sortItems.children("i").remove(),this.$sortItems.off("click"),delete this.$sortItems);var c=this;this.options.sortOption=b;var d=a.extend({},b);this.sortObject=d,this.$sortItems=this.$table.find("[data-sort-by]"),this.$sortItems.addClass("semi-auto-table-sorter"),this.$sortItems.each(function(b,d){var e=a(d);e.tooltip({title:function(){var b=a(this);return"asc"==b.data("sort")?a.fn.semiAutoTable.locales[c.options.locale].sort_asc:"desc"==b.data("sort")?a.fn.semiAutoTable.locales[c.options.locale].sort_desc:a.fn.semiAutoTable.locales[c.options.locale].sort_none},container:"body"})}),this.$sortItems.each(function(b,d){var e=a(d);e.on("click",function(a){a.preventDefault(),e.tooltip("hide");var b=e.data("sort-by"),d=e.data("sort"),f={};"none"==d?f[b]="asc":"asc"==d?f[b]="desc":"desc"==d&&(f[b]="none"),c.triggerSortChangeEvent(f)})}),this.$sortItems.each(function(b,c){var e=a(c),f=e.data("sort-by"),g=d[f]?d[f]:"none";e.data("sort",g),e.append("asc"==g?"<i class='fa fa-sort-asc' />":"desc"==g?"<i class='fa fa-sort-desc' />":"<i class='fa fa-sort' />")})},d.prototype.getSortObject=function(){return a.extend({},this.sortObject)},d.prototype.initPaginator=function(){this.updatePaginator(this.options.pageOption)},d.prototype.updatePaginator=function(b){if(this.pageObject&&delete this.pageObject,!b)return void this.$paginator.empty();this.options.pageOption=a.extend({},a.fn.semiAutoTable.defaults.pageOption,b);var c=this.options.pageOption;if(null==c.currentPage)throw"pageOption.currentPage is null";if(null==c.totalPages)throw"pageOption.totalPages is null";if(null==c.totalRows)throw"pageOption.totalRows is null";if(!c.rowsPerPageOptions||0==c.rowsPerPageOptions.length)throw"pageOption.rowsPerPageOptions is null or empty";c._rowsPerPageOptions=c.rowsPerPageOptions.split(","),c.rowsPerPage=c.rowsPerPage||c._rowsPerPageOptions[0],this.pageObject={currentPage:c.currentPage,totalPages:c.totalPages,totalRows:c.totalRows,rowsPerPage:c.rowsPerPage||c._rowsPerPageOptions[0]},this.initPageInfo(c),this.initPageSize(c),this.initPages(c),this.initPageJumper(c)},d.prototype.initPageInfo=function(b){this.$pageInfo&&(this.$pageInfo.find('[data-toggle="tooltip"]').tooltip("destroy"),this.$pageInfo.off("click"),this.$pageInfo.remove(),delete this.$pageInfo);var d=this,e=b.currentPage,f=b.rowsPerPage,g=b.totalRows,h=(e-1)*f+1,i=h+f-1>g?g:h+f-1;this.$pageInfo=this._addMenuItem(this.$paginator,{title:h+"-"+i+" of "+g,tooltip:c(a.fn.semiAutoTable.locales[this.options.locale].current_page,e),callback:function(){d.$pageInfo.hide(),d.$pages.hide(),d.$pageSize.selectpicker("show"),d.$pageJumper.show(),d.$pageGo.show()}}),this.$pageInfo.find('[data-toggle="tooltip"]').tooltip({container:"body"})},d.prototype.initPageSize=function(b){this.$pageSize&&(this.$pageSize.selectpicker("destroy"),this.$pageSize.off("change"),this.$pageSize.remove(),delete this.$pageSize);var d=this,e=b.rowsPerPage,f=b._rowsPerPageOptions,g=a("<select></select>");this.$pageSize=g,g.addClass("rows-per-page"),g.addClass(this.options.btnGroupSize),a.each(f,function(b,f){var h=a("<option></option>");h.attr("value",f),h.text(c(a.fn.semiAutoTable.locales[d.options.locale].page_size,f)),h.appendTo(g),f==e&&h.prop("selected","selected")}),g.on("change",function(){var b=a(this).val(),c=parseInt(b,10),e=Math.ceil(d.pageObject.totalRows/c),f=d.pageObject.currentPage>e?e:d.pageObject.currentPage;d.pageObject.rowsPerPage=c,d.pageObject.totalPages=e,d.pageObject.currentPage=f,d.$table.triggerHandler("pageSizeChange")}),g.appendTo(this.$paginator),g.selectpicker(),g.selectpicker("hide")},d.prototype.initPages=function(b){this.$pages&&(this.$pages.find('[data-toggle="tooltip"]').tooltip("destroy"),this.$pages.off("click"),this.$pages.remove(),delete this.$pages);var d=this,e=b.currentPage,f=b.totalPages,g=[];1!=e&&(g.push({icon:"fa fa-angle-double-left",tooltip:a.fn.semiAutoTable.locales[this.options.locale].first_page,callback:function(){d.triggerPageChangeEvent({currentPage:1})}}),g.push({icon:"fa fa-angle-left",tooltip:c(a.fn.semiAutoTable.locales[this.options.locale].prev_page,e-1),callback:function(){d.triggerPageChangeEvent({currentPage:d.pageObject.currentPage-1})}})),e!=f&&(g.push({icon:"fa fa-angle-right",tooltip:c(a.fn.semiAutoTable.locales[this.options.locale].prev_page,e+1),callback:function(){d.triggerPageChangeEvent({currentPage:d.pageObject.currentPage+1})}}),g.push({icon:"fa fa-angle-double-right",tooltip:a.fn.semiAutoTable.locales[this.options.locale].last_page,callback:function(){d.triggerPageChangeEvent({currentPage:f})}})),this.$pages=this._addMenuItem(this.$paginator,g),this.$pages.find('[data-toggle="tooltip"]').tooltip({container:"body"})},d.prototype.initPageJumper=function(b){this.$pageJumper&&(this.$pageJumper.remove(),delete this.$pageJumper),this.$pageGo&&(this.$pageGo.remove(),delete this.$pageGo);var c=this,d=b.currentPage,e=b.totalPages,f=this.appendButtonGroup(this.$paginator);f.addClass("page-jump");var g=a('<input type="text" value="'+d+'"/>');g.appendTo(f),f.append("<span> / "+e+"</span>"),g.data("prevVal",d),g.keydown(function(b){if(13==b.keyCode){var d=a(this).val();b.preventDefault(),b.stopImmediatePropagation(),c.triggerPageChangeEvent({currentPage:parseInt(d,10)})}}).keyup(function(){var b=a(this),d=b.data("prevVal")||"",e=b.val();if(""!=e){if(!/^[0-9]*[1-9][0-9]*$/.test(e))return void b.val(d);var f=parseInt(e,10);if(f>c.getPageObject().totalPages)return void b.val(d);b.data("prevVal",f),c.pageObject.currentPage=parseInt(e,10)}}),this.$table.off("pageSizeChange"),this.$table.on("pageSizeChange",function(){g.val(c.pageObject.currentPage),g.data("prevVal",c.pageObject.currentPage),f.children("span").text(" / "+c.pageObject.totalPages)}),f.hide();var h=this._addMenuItem(this.$paginator,{title:"Go",callback:function(){c.triggerPageChangeEvent({})}});h.hide(),this.$pageGo=h,this.$pageJumper=f},d.prototype.getPageObject=function(){return a.extend({},this.pageObject)},d.prototype.getSelectedRows=function(){var b=[];return this.$rowIdInputList?(a.each(this.$rowIdInputList,function(c,d){a(d).prop("checked")&&b.push(d.value)}),b):b},d.prototype.triggerPageChangeEvent=function(b){this.$table.triggerHandler("pageChange",a.extend({},this.pageObject,b))},d.prototype.triggerSortChangeEvent=function(a){this.$table.triggerHandler("sortChange",a)},d.prototype.get=function(){return this},d.prototype.destroy=function(){this.$sortItems.off("click"),this.$sortItems.find("i.fa").remove(),this.$sortItems.removeClass("semi-auto-table-sorter"),this.$table.removeClass(this.options.tableClass),this.$table.removeData("semiAutoTable"),this.$container.after(this.$table),this.$container.remove()};var e=a.fn.semiAutoTable;a.fn.semiAutoTable=b,a.fn.semiAutoTable.Constructor=d,a.fn.semiAutoTable.defaults={locale:"zh-CN",containerClass:"",btnGroupSize:"btn-group-sm",btnClass:"btn-default",toolbarClass:"row semi-auto-table-toolbar",menuBarWrapperClass:"col-sm-12 col-md-8 semi-auto-table-menubar",menuBarClass:"btn-toolbar",paginatorWrapperClass:"col-sm-12 col-md-4 semi-auto-table-paginator",paginatorClass:"btn-toolbar pull-right",tableWrapperClass:"table-responsive semi-auto-table-data",tableClass:"table table-striped table-condensed table-hover",rowOption:{showSelectAll:!0,type:"checkbox",inputName:"row.id",rowSelector:"> tbody > tr"},columnOption:{showColumnSelect:!1,stickyColumns:[],hideColumns:[]},menus:[],sortOption:{},pageOption:{rowsPerPageOptions:"20,50,100,200,500,1000",currentPage:null,rowsPerPage:null,totalPages:null,totalRows:null}},a.fn.semiAutoTable.locales={},a.fn.semiAutoTable.noConflict=function(){return a.fn.semiAutoTable=e,this}}(jQuery),+function(a){a.fn.semiAutoTable.locales["en-US"]={select_all:"All",select_inverse:"Inverse select",next_page:"Next page {0}",prev_page:"Prev page {0}",first_page:"First page",last_page:"Last page",current_page:"Current page {0}",page_size:"{0} rows per page",sort_asc:"Ascending",sort_desc:"Descending",sort_none:"Unsorted"}}(jQuery),+function(a){a.fn.semiAutoTable.locales["zh-CN"]={select_all:"全选",select_inverse:"反选",next_page:"下页第 {0} 页",prev_page:"上页第 {0} 页",first_page:"第一页",last_page:"最后一页",current_page:"当前第 {0} 页",page_size:"每页 {0} 条",sort_asc:"升序排列",sort_desc:"降序排列",sort_none:"未排序"}}(jQuery);